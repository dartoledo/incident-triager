- id: "1a"
  title: "Public Web Login Page (UI & Edge Health)"
  row: 1
  col_span: 1
  symptom_description: "User sees a blank screen, broken layout, or an Akamai error message."
  monitoring_signals:
    - label: "Akamai Edge Errors"
      value: "5xx"
      icon: "ğŸ”´"
      description: "Failure is within the CDN."
    - label: "WAF Block Rate"
      value: "403"
      icon: "ğŸ›¡ï¸"
      description: "High spike = WAF blocking valid users (False Positive)."
    - label: "Asset Delivery (404s)"
      value: "Count"
      icon: "ğŸ“‰"
      description: "High spike = Missing JS/CSS files (Bad build/cache)."
    - label: "JS Error Rate (RUM)"
      value: "Rate"
      icon: "ğŸ›"
      description: "High client-side crashes (e.g., React Minified Error)."
    - label: "Synthetic Monitor"
      value: "Pass/Fail"
      icon: "ğŸ¤–"
      description: "Status of the login page probe."
  pager_duty_alerts:
    - "Akamai_Edge_Critical"
    - "WAF_False_Positive_Spike"
    - "Synthetic_Check_Fail"
  decision_action:
    - condition: "Edge 5xx (Akamai Config)"
      action: "Rollback Akamai Property."
    - condition: "WAF 403s (Aggressive Rules)"
      action: "Set WAF Rule to \"Alert Only\"."
    - condition: "Asset 404s (Cache Mismatch)"
      action: "Purge CDN Cache or Fix Build."
    - condition: "JS Errors (Broken UI Code)"
      action: "Rollback Frontend Artifact."
  team: "Frontend / CDN Ops"

- id: "1b"
  title: "API Gateway & Login Endpoints (Functional Health)"
  row: 1
  col_span: 1
  symptom_description: "User clicks 'Login' but gets an error, infinite spinner, or 'Invalid Credentials'."
  monitoring_signals:
    - label: "Availability"
      value: "5xx %"
      icon: "ğŸ”´"
      description: "HTTP 500/502/503 %. The server crashed or timed out."
    - label: "Auth Health"
      value: "401/403"
      icon: "ğŸŸ "
      description: "Login Failure vs Success Rate."
    - label: "Capacity"
      value: "429"
      icon: "ğŸŸ¡"
      description: "Throttling Count. We are rejecting traffic."
    - label: "Latency Split"
      value: "ms"
      icon: "â±ï¸"
      description: "Gateway Overhead vs Upstream Response."
  pager_duty_alerts:
    - "API_Availability_Drop_>1%"
    - "Auth_Anomaly_Detected"
    - "High_429_Rate"
  decision_action:
    - condition: "High 500s (App/Code Crash)"
      action: "Rollback Backend API."
    - condition: "High 502/504 (Timeout/Network)"
      action: "Check Row 2 (Connectivity)."
    - condition: "High 401s (DB Sync/Attack)"
      action: "Check Row 3 (DB) or Security Logs."
    - condition: "High 429s (DDoS/Limit)"
      action: "Scale Gateway or Block IP."
  team: "Backend API"

- id: "2a"
  title: "GCP Login Service (Cloud)"
  row: 2
  col_span: 1
  symptom_description: "API errors are originating specifically from the Google Cloud load balancer."
  monitoring_signals:
    - label: "GCP LB 5xx Rate"
      value: "Rate"
      icon: "ğŸ“ˆ"
      description: "Specific to GCP ingress."
    - label: "Healthy Host Count"
      value: "Count"
      icon: "ğŸŸ¢"
      description: "Active Pods/VMs."
    - label: "Container Restarts"
      value: "Count"
      icon: "âš ï¸"
      description: "CrashLoopBackOff counts."
  pager_duty_alerts:
    - "GCP_Availability_Drop"
    - "K8s_Pod_Crash_Loop"
  decision_action:
    - condition: "If Failing"
      action: "Trigger Traffic Drain to On-Prem."
  runbooks:
    - label: "Drain_GCP_Region_Runbook"
      url: "#"
  team: "SRE / Cloud Ops"

- id: "2b"
  title: "On-Prem Login Service (Legacy)"
  row: 2
  col_span: 1
  symptom_description: "API errors are originating specifically from the On-Prem Data Center."
  monitoring_signals:
    - label: "F5/Nginx 5xx Rate"
      value: "Rate"
      icon: "ğŸ“ˆ"
      description: "Specific to DC ingress."
    - label: "Network Link Saturation"
      value: "Mbps"
      icon: "ğŸ”Œ"
      description: "Bandwidth usage on the interconnect/VPN."
    - label: "Hardware Health"
      value: "Util %"
      icon: "ğŸŒ¡ï¸"
      description: "CPU/Memory utilization."
  pager_duty_alerts:
    - "OnPrem_Availability_Drop"
    - "DC_Link_Saturation_>90%"
  decision_action:
    - condition: "If Failing"
      action: "Trigger Traffic Drain to GCP."
  runbooks:
    - label: "Drain_OnPrem_Runbook"
      url: "#"
  team: "NetOps / SysAdmin"

- id: "3"
  title: "Cassandra Cluster Health"
  row: 3
  col_span: 2
  symptom_description: "Global slowness, timeouts, or 'Data not found' across BOTH environments."
  monitoring_signals:
    - label: "Read/Write Latency (P99)"
      value: ">50ms"
      icon: "â±ï¸"
      description: ">50ms indicates trouble."
    - label: "Dropped Mutations"
      value: "Count"
      icon: "ğŸš«"
      description: "Critical data loss indicator."
    - label: "Pending Tasks"
      value: "Count"
      icon: "âš ï¸"
      description: "Internal backpressure/queueing."
    - label: "Replication Lag"
      value: "ms"
      icon: "ğŸ”„"
      description: "Delay between DC and Cloud nodes."
  pager_duty_alerts:
    - "Cassandra_Latency_Critical"
    - "Cassandra_Node_Down"
  decision_action:
    - condition: "If High Latency"
      action: "Check for \"Hot Partition\" query patterns."
    - condition: "If Dropped Messages"
      action: "Add capacity or Throttle API (429s)."
  runbooks:
    - label: "Cassandra_Emergency_Ops"
      url: "#"
  team: "Database Team (DBA)"

- id: "4"
  title: "Change Log & Configs"
  row: 4
  col_span: 2
  symptom_description: "Did a recent change trigger this?"
  monitoring_signals:
    - label: "Recent Deploys"
      value: "Time"
      icon: "ğŸš€"
      description: "Timestamp/Version for Frontend, API, and Schema."
    - label: "Config Changes"
      value: "Time"
      icon: "ğŸ“"
      description: "Akamai Activation, WAF Rules, Feature Flags."
    - label: "Cert Status"
      value: "Days"
      icon: "ğŸ“œ"
      description: "SSL Certificate expiry dates."
  decision_action:
    - condition: "If incident matches timestamp"
      action: "Auto-Rollback immediately."
  team: "Release Management"
